---
- hosts: all

  become: yes
  become_method: sudo
  remote_user: ansible

  tasks:
    - name: Empty remote directory
      synchronize:
        dest: /opt/tomcat/webapps/web*
        delete: yes
        recursive: yes
    - name: Deploy War File
      copy:
        src: /home/ansible/Jenkins_Slave/workspace/DeployWarOnTomcat/webapp.war
        dest: /opt/tomcat/webapps/webapp.war
    - name: Start and enable Tomcat service
      systemd:
        name: tomcat
        state: started
        enabled: true
        daemon_reload: true       
